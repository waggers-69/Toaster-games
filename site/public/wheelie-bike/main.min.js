// Stub for GameDistribution SDK â€” ad-less and local
window.GD_OPTIONS = window.GD_OPTIONS || {};

// Minimal bridge for the game to interact with
window.GD_BRIDGE = {
    exports: {
        formatTokenURLSearch: function(data){ return ""; },
        extendUrlQuery: function(url, query){ return url; },
        base64Encode: function(str){ return str; }
    },
    parentURL: window.location.href,
    parentDomain: window.location.hostname,
    topDomain: window.location.hostname
};

// Fake GameDistribution object
window.gdsdk = {
    onEvent: function(eventHandler){
        // Immediately fire SDK_GAME_START so game thinks ad completed
        if (eventHandler) {
            setTimeout(function(){
                eventHandler({ name: "SDK_GAME_START" });
                // Also fire COMPLETE event so the game believes all ads finished
                eventHandler({ name: "COMPLETE" });
            }, 50);
        }
    },
    onLoaderEvent: function() {} // no-op
};

// Optional: make the global GD_OPTIONS.onEvent call safe
if (window.GD_OPTIONS.onEvent) {
    setTimeout(function() {
        window.GD_OPTIONS.onEvent({ name: "SDK_GAME_START" });
        window.GD_OPTIONS.onEvent({ name: "COMPLETE" });
    }, 50);
}
